<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>CustoCat</title>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <div> 
      <img src="images/head/image1.jpg" class="imgHead" id="headImage" width="300px" height="300px"> 
      <img src="images/legs/image1.jpeg" class="imgLegs" id="legsImage" width="300px" height="300px"> 
      <img src="images/arms/image1.jpg" class="imgArm" id="armsImage" width="300px" height="300px"> 
    </div>
    <br>
    <div class="buttonPosition">
        <button onclick="nextImage('headImage', 0)">
            Next Cat 
        </button> 
        <button onclick="previousImage('headImage', 0)">
          Previous Cat 
        </button>
    
        <button onclick="nextImage('legsImage', 2)">
          Next Octopus 
        </button> 
        <button onclick="previousImage('legsImage', 2)">
          Previous Octopus
        </button>

        <button onclick="nextImage('armsImage', 1)">
            Next Arm 
        </button> 
        <button onclick="previousImage('armsImage', 1)">
          Previous Arm
        </button>
        <button onclick="randomiseAll()">Randomise</button>
    </div>
    
    

<script>
  // Required packages
  const fs = require('fs')

  // Sub image arrays
  var headImgArray = getFiles('./images/head/')
  var armImgArray = getFiles('./images/arms/')
  var legImgArray = getFiles('./images/legs/')
  var extraImgArray = getFiles('./images/accessory/')

  // Main array of image arrays
  var mainArray = [headImgArray, armImgArray, legImgArray, extraImgArray]

  // Counter array that holds the current image for each image array
  var counterArr = [0,0,0,0,0]

  // Element Array - Holds tags matched with array numbers
  var elementArray = [
    ['headImage', 0],
    ['armsImage', 1],
    ['legsImage', 2]
  ]


  function nextImage(element, arrayNum) {
    // Grab image variable from the document
    var img = document.getElementById(element)
    
    // If the counter is at the end of the array, loop around to the start of the array
    if (counterArr[arrayNum] == mainArray[arrayNum].length - 1) {
      counterArr[arrayNum] = 0
      // Update image source to new value
      img.src = mainArray[arrayNum][0]
    }

    // Else increase the counter and update image source
    else {
      counterArr[arrayNum] += 1
      img.src = mainArray[arrayNum][counterArr[arrayNum]]
    }
  }


  function previousImage(element, arrayNum) {
    // Grab image variable from the document
    var img = document.getElementById(element)
    
    // If the counter is at 0, loop around to the end of the array
    if (counterArr[arrayNum] == 0) {
      counterArr[arrayNum] = mainArray[arrayNum].length - 1
      // Update image source to new value
      img.src = mainArray[arrayNum][counterArr[arrayNum]]
    }

    // Else decrease the counter and update image source
    else {
      counterArr[arrayNum] -= 1
      img.src = mainArray[arrayNum][counterArr[arrayNum]]
    }
  }


  function randomiseAll() {
    // Loop through all elements in the all elements array
    for (index in elementArray) {     
      // Grab the arrayNum of the element type
      let arrayNum = elementArray[index][1]

      // Generate random num for an image that isn't the current image
      randomNum = getRandomInt(0, mainArray[arrayNum].length)
      while (randomNum == counterArr[arrayNum]) {
        randomNum = getRandomInt(0, mainArray[arrayNum].length)
      }

      // Set the new image and update the current image in the counterArr
      document.getElementById(elementArray[index][0]).src = mainArray[arrayNum][randomNum]
      counterArr[arrayNum] = randomNum
    }
  }
  
  
  // Get a random int value between a min and a max
  function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min)) + min;
  }


  // Get all files in a folder and return an array containing their names
  function getFiles(dir){
    fileList = [];
    var files = fs.readdirSync(dir);
    for(var i in files){
        if (!files.hasOwnProperty(i)) continue;
        var name = dir+'/'+files[i];
        if (!fs.statSync(name).isDirectory()){
            fileList.push(name);
        }
    }
    return fileList;
  }

  </script>
  </body>
</html>
