<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>CustoCat</title>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <img src="images/head/image1.jpg" class="imgHead" id="headImage" width="300px" height="300px"> 
    <img src="images/legs/image1.jpeg" class="imgLegs" id="legsImage" width="300px" height="300px"> 
    <img src="images/arms/image1.jpg" class="imgArm" id="armsImage" width="300px" height="300px"> 

    <br>

    <button onclick="nextImage('headImage', 0)" class="nextCat">
      Next Cat 
    </button> 
    <button onclick="nextImage('legsImage', 2)" class="nextOct">
      Next Octopus 
    </button> 
    <button onclick="nextImage('armsImage', 1)" class="nextArm">
      Next Arm 
    </button> 
    

    <button onclick="previousImage('headImage', 0)" class="prevCat">
      Previous Cat 
    </button>    
    <button onclick="previousImage('legsImage', 2)" class="prevOct">
      Previous Octopus
    </button>
    <button onclick="previousImage('armsImage', 1)" class="prevArm">
      Previous Arm
    </button>


    <button onclick="randomiseAll()" class="random">Randomise</button>
    
    

<script>
  function getFiles() {
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open("GET", '/files', false); // false for synchronous request
    xmlHttp.send(null);
    return JSON.parse(xmlHttp.responseText);
  }

  var mainArray = getFiles()

  // Counter array that holds the current image for each image array
  var counterArr = [0,0,0,0,0]

  // Element Array - Holds tags matched with array numbers
  var elementArray = [
    ['headImage', 0],
    ['armsImage', 1],
    ['legsImage', 2]
  ]


  function nextImage(element, arrayNum) {
    // Grab image variable from the document
    var img = document.getElementById(element)
    
    // If the counter is at the end of the array, loop around to the start of the array
    if (counterArr[arrayNum] == mainArray[arrayNum].length - 1) {
      counterArr[arrayNum] = 0
      // Update image source to new value
      img.src = mainArray[arrayNum][0]
    }

    // Else increase the counter and update image source
    else {
      counterArr[arrayNum] += 1
      img.src = mainArray[arrayNum][counterArr[arrayNum]]
    }
  }


  function previousImage(element, arrayNum) {
    // Grab image variable from the document
    var img = document.getElementById(element)
    
    // If the counter is at 0, loop around to the end of the array
    if (counterArr[arrayNum] == 0) {
      counterArr[arrayNum] = mainArray[arrayNum].length - 1
      // Update image source to new value
      img.src = mainArray[arrayNum][counterArr[arrayNum]]
    }

    // Else decrease the counter and update image source
    else {
      counterArr[arrayNum] -= 1
      img.src = mainArray[arrayNum][counterArr[arrayNum]]
    }
  }


  function randomiseAll() {
    // Loop through all elements in the all elements array
    for (index in elementArray) {     
      // Grab the arrayNum of the element type
      let arrayNum = elementArray[index][1]

      // Generate random num for an image that isn't the current image
      randomNum = getRandomInt(0, mainArray[arrayNum].length)
      while (randomNum == counterArr[arrayNum]) {
        randomNum = getRandomInt(0, mainArray[arrayNum].length)
      }

      // Set the new image and update the current image in the counterArr
      document.getElementById(elementArray[index][0]).src = mainArray[arrayNum][randomNum]
      counterArr[arrayNum] = randomNum
    }
  }
  
  
  // Get a random int value between a min and a max
  function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min)) + min;
  }

  </script>
  </body>
</html>
